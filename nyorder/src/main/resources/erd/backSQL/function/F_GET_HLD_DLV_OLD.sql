USE [NY_ORDER]
GO
/****** Object:  UserDefinedFunction [dbo].[F_GET_HLD_DLV_OLD]    Script Date: 2022-03-15 오후 12:57:26 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
/*EXEC F_OLDCS_HOLIWEEK_DELIVERY('010111111110') 

SELECT DBO.F_OLDCS_HOLIWEEK_DELIVERY('010111111110')

SELECT DBO.F_OLDCS_HOLIWEEK_DELIVERY('101111111100')
**/

ALTER FUNCTION [dbo].[F_GET_HLD_DLV_OLD] ( @HOLIWEEK NVARCHAR(300))
RETURNS VARCHAR(300)
AS
BEGIN
	DECLARE @RTN_HOLIWEEK_DELIVERY NVARCHAR(300)
	DECLARE @NULLYN INT
	DECLARE @STR NVARCHAR(300)
	SET @NULLYN = 0
	
	IF(SUBSTRING(@HOLIWEEK,1,5)='00000')
		BEGIN 
			RETURN NULL 
		END

	IF(SUBSTRING(@HOLIWEEK,1,1)='1')
		BEGIN
			SET @STR = '1'
			SET @NULLYN = 1
		END
	IF(SUBSTRING(@HOLIWEEK,2,1)='1')
		BEGIN
			IF(@NULLYN <> 0)
				BEGIN 
					SET  @STR = CONCAT(@STR,',')
				END
			SET  @STR = CONCAT(@STR,'2')
			SET @NULLYN = 1
		END
	IF(SUBSTRING(@HOLIWEEK,3,1)='1')
		BEGIN
			IF(@NULLYN <> 0)
				BEGIN 
					SET  @STR = CONCAT(@STR,',')
				END
			SET  @STR = CONCAT(@STR,'3')
			SET @NULLYN = 1
		END
	IF(SUBSTRING(@HOLIWEEK,4,1)='1')
		BEGIN
			IF(@NULLYN <> 0)
				BEGIN 
					SET  @STR = CONCAT(@STR,',')
				END
			SET  @STR = CONCAT(@STR,'4')
			SET @NULLYN = 1
		END
	IF(SUBSTRING(@HOLIWEEK,5,1)='1')
		BEGIN
			IF(@NULLYN <> 0)
				BEGIN 
					SET  @STR = CONCAT(@STR,',')
				END
			SET  @STR = CONCAT(@STR,'5')
		END	
	SET @STR = CONCAT(@STR,'주-')
	
	
	SET @NULLYN = 0
	IF(SUBSTRING(@HOLIWEEK,6,1)='1')
		BEGIN
			SET  @STR = CONCAT(@STR,'일')
			SET @NULLYN = 1
		END
	IF(SUBSTRING(@HOLIWEEK,7,1)='1')
		BEGIN
			IF(@NULLYN <> 0)
				BEGIN 
					SET  @STR = CONCAT(@STR,',')
				END
			SET  @STR = CONCAT(@STR,'월')
			SET @NULLYN = 1
		END
		
	IF(SUBSTRING(@HOLIWEEK,8,1)='1')
		BEGIN
			IF(@NULLYN <> 0)
				BEGIN 
					SET  @STR = CONCAT(@STR,',')
				END
			SET  @STR = CONCAT(@STR,'화')
			SET @NULLYN = 1
		END
	IF(SUBSTRING(@HOLIWEEK,9,1)='1')
		BEGIN
			IF(@NULLYN <> 0)
				BEGIN 
					SET  @STR = CONCAT(@STR,',')
				END
			SET  @STR = CONCAT(@STR,'수')
			SET @NULLYN = 1
		END
	IF(SUBSTRING(@HOLIWEEK,10,1)='1')
		BEGIN
			IF(@NULLYN <> 0)
				BEGIN 
					SET  @STR = CONCAT(@STR,',')
				END
			SET  @STR = CONCAT(@STR,'목')
			SET @NULLYN = 1
		END
	IF(SUBSTRING(@HOLIWEEK,11,1)='1')
		BEGIN
			IF(@NULLYN <> 0)
				BEGIN 
					SET  @STR = CONCAT(@STR,',')
				END
			SET  @STR = CONCAT(@STR,'금')
			SET @NULLYN = 1
		END
	IF(SUBSTRING(@HOLIWEEK,12,1)='1')
		BEGIN
			IF(@NULLYN <> 0)
				BEGIN 
					SET  @STR = CONCAT(@STR,',')
				END
			SET  @STR = CONCAT(@STR,'토')
		END	
	
    SET	@RTN_HOLIWEEK_DELIVERY = @STR
	RETURN ISNULL(@RTN_HOLIWEEK_DELIVERY, NULL) 
END


/*EXEC F_OLDCS_HOLIWEEK_DELIVERY('010111111110') 

SELECT DBO.F_OLDCS_HOLIWEEK_DELIVERY('010111111110')

SELECT DBO.F_OLDCS_HOLIWEEK_DELIVERY('101111111100')
**/